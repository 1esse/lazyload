!function(t){"use strict";if("object"==typeof exports&&"function"!=typeof IntersectionObserver)try{require("../intersection-observer/intersection-observer.js")}catch(t){console.error("Can't find intersection-observer module, pls install it first.")}function o(t){"function"!=typeof IntersectionObserver&&this._compatibilityError(),t&&"[object Object]"!==Object.prototype.toString.call(t)&&console.error("Argument type must be object."),t=t||{},this.options={},this.options.root=t.root||null,this.options.rootMargin=t.rootMargin||"0px",this.options.threshold=t.threshold||0,this.init()}function e(t){return new o(t)}o.prototype.init=function(){this.observer=new IntersectionObserver(function(t){for(var o=0;o<t.length;o++){var e=t[o];if(void 0===e.isIntersecting&&void 0===e.intersectionRatio&&this._compatibilityError(),void 0===e.isIntersecting?0<e.intersectionRatio:e.isIntersecting){var r=e.target;if(this.observer.unobserve(r),"img"!==r.tagName.toLowerCase())continue;this._loadPic(r)}}}.bind(this),this.options),this.loadMore()},o.prototype.loadMore=function(){for(var t=this._capturePics(),o=0;o<t.length;o++)this.observer.observe(t[o])},o.prototype.destory=function(t){t&&this._loadAllPics(),this.observer.disconnect()},o.prototype._capturePics=function(){return document.querySelectorAll("img[lazy-src]")},o.prototype._loadPic=function(t){var o=t.getAttribute("lazy-src");t.removeAttribute("lazy-src"),o&&t.setAttribute("src",o)},o.prototype._compatibilityError=function(){this._loadAllPics(),console.error("The browser is not (complete) support IntersectionObserver function.You can try to install intersection-observer module and link(or require in commonjs) it before this module to solve this problem.")},o.prototype._loadAllPics=function(){for(var t=this._capturePics(),o=0;o<t.length;o++)this._loadPic(t[o])},"object"==typeof exports?module.exports={LazyLoad:o,lazyload:e}:(t.LazyLoad=o,t.lazyload=e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:{});